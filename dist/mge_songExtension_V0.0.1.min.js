mge._extensionSong={as:{_list:[]},at:{}};mge._extensionSong.at={set config(_value){this.ar(_value)},get config(){return this.ai},load:function(){this.al()},play:function(_bpm,_instruments,_mix){this.ao(_bpm,_instruments,_mix)}};mge.song={create:function(){return mge._extensionSong.as.aa()},loadNextSong:function(){return mge._extensionSong.as.ac()}};mge._extensionSong.at.ah=function(){this.ai={};this.aj=false;this.ak=[]};mge._extensionSong.at.al=function(){let ai=this.ai;let ak=[];ai._p.forEach(function(an){let am=[];ai._str.forEach(function(_section){an._s[_section].forEach(function(_bar){am.push(an._b[_bar]);});});ak.push(am);});this.ak=ak;this.aj=true};mge._extensionSong.at.ao=function(_bpm,_instruments,_mix){let ap={play:function(_frequency,_startTime,_duration,_volume){let _synthConfig={volumeADSR:{a:0.02,d:400,s:0,r:0.1,minValue:0,maxValue:_volume},oscType:'sine'};mge.audio.playSound(_synthConfig,_frequency,_startTime,_duration,_volume)}};if(!this.aj){this.al()};mge.sequencer.stop();mge.sequencer.reset();let aq=0;this.ak.forEach(function(_track){mge.sequencer.createTrack(_track,_instruments[aq]||ap,_mix[aq]||1);aq+=1;});mge.sequencer.bpm=_bpm;mge.sequencer.start()};mge._extensionSong.at.ar=function(_value){this.ai=_value;this.aj=false;this.ak=[]};mge._extensionSong.as.aa=function(){let ab=Object.create(mge._extensionSong.at);ab.ah();this._list.push(ab);return ab};mge._extensionSong.as.ac=function(){let ae=mge._extensionSong.as._list;let af=0;let ag=false;let ad=ae.length;if(ae.length==0){return 1;}else{ae.forEach(function(_song){if(_song.aj){af+=1}else if(!ag){_song.al();af+=1;ag=true};});return af/ad}}