mge._extensionImage={au:{_list:[]},av:{}};mge._extensionImage.av={set config(_value){this.as(_value)},get config(){return this.ai},set scale(_value){this.at(_value)},get scale(){return this.ak},get width(){return this.ai._s._w*this.ak},get height(){return this.ai._s._h*this.ak},load:function(){this.an()},draw:function(_ctx){this.am(_ctx)}};mge.image={create:function(){return mge._extensionImage.au.aa()},loadNextImage:function(){return mge._extensionImage.au.ac()}};mge._extensionImage.av.as=function(_value){this.ai=_value;this.aj=false;this.al={}};mge._extensionImage.av.at=function(_value){this.ak=_value;this.aj=false;this.al={}};mge._extensionImage.av.an=function(){let ai=this.ai;let ak=this.ak;let _s=ai._s||{};let _w=_s._w*ak||200;let _h=_s._h*ak||200;let ao=new OffscreenCanvas(_w,_h);let _ctx=ao.getContext('2d');let _p=ai._p||[];_p.forEach(function(aq){let fs=aq._fs||['C','red'];if(fs[0]=='C'){_ctx.fillStyle=fs[1]}else if(fs[0]=='LG'||fs[0]=='RG'){let ap={};if(fs[0]=='LG'){ap=_ctx.createLinearGradient(fs[1]*ak,fs[2]*ak,fs[3]*ak,fs[4]*ak)}else{ap=_ctx.createRadialGradient(fs[1]*ak,fs[2]*ak,fs[3]*ak,fs[4]*ak,fs[5]*ak,fs[6]*ak)};let _gp=aq._gp;_gp.forEach(function(_point){ap.addColorStop(_point[0],_point[1]);});_ctx.fillStyle=ap};let ss=aq._ss||['red',2,'square','miter'];_ctx.strokeStyle=ss[0];_ctx.lineWidth=ss[1]*ak;_ctx.lineCap=ss[2];_ctx.lineJoin=ss[3];_ctx.beginPath();let _c=aq._c||[];_c.forEach(function(_cmd){if(_cmd[0]=='M'){_ctx.moveTo(_cmd[1]*ak,_cmd[2]*ak)}else if(_cmd[0]=='L'){_ctx.lineTo(_cmd[1]*ak,_cmd[2]*ak)}else if(_cmd[0]=='Q'){_ctx.quadraticCurveTo(_cmd[1]*ak,_cmd[2]*ak,_cmd[3]*ak,_cmd[4]*ak)}else if(_cmd[0]=='B'){_ctx.bezierCurveTo(_cmd[1]*ak,_cmd[2]*ak,_cmd[3]*ak,_cmd[4]*ak,_cmd[5]*ak,_cmd[6]*ak)}else if(_cmd[0]=='C'){_ctx.arc(_cmd[1]*ak,_cmd[2]*ak,_cmd[3]*ak,0,2*Math.PI)}else if(_cmd[0]=='R'){_ctx.rect(_cmd[1]*ak,_cmd[2]*ak,_cmd[3]*ak,_cmd[4]*ak)}else if(_cmd[0]=='E'){_ctx.ellipse(_cmd[1]*ak,_cmd[2]*ak,_cmd[3]*ak,_cmd[4]*ak,_cmd[5],0,2*Math.PI)};});if(fs[0]!='N'){_ctx.fill()};if(ss[1]>0){_ctx.stroke()};let _txt=aq._t||[0,0,20,'normal','serif','start','alphabetic',''];let _fontSize=_txt[2]*ak;_ctx.font=_txt[3]+' '+_fontSize.toString()+'px '+_txt[4];_ctx.textAlign=_txt[5];_ctx.textBaseline=_txt[6];if(fs[0]!='N'){_ctx.fillText(_txt[7],_txt[0]*ak,_txt[1]*ak)};if(ss[1]>0){_ctx.strokeText(_txt[7],_txt[0]*ak,_txt[1]*ak)};});this.al=ao.transferToImageBitmap();this.aj=true};mge._extensionImage.av.ah=function(){this.ai={};this.aj=false;this.ak=1;this.al={}};mge._extensionImage.av.am=function(_ctx){_ctx.drawImage(this.al,0,0)};mge._extensionImage.au.aa=function(){let ab=Object.create(mge._extensionImage.av);ab.ah();this._list.push(ab);return ab};mge._extensionImage.au.ac=function(){let ae=mge._extensionImage.au._list;let af=0;let ag=false;let ad=ae.length;if(ae.length==0){return 1;}else{ae.forEach(function(_img){if(_img.aj){af+=1}else if(!ag){_img.an();af+=1;ag=true};});return af/ad}}